@(t: LocalTask,
  url:String,
  statusmap: Map[String, String],
  errors: List[FieldError]
)

@import org.joda.time.format.DateTimeFormat
@import partials._

@errorClass = @{
if(errors.nonEmpty) "error" else ""
}

@main(s"BEIS - Business Process Management", backLink=Some(BackLink("Return to Task list",controllers.routes.TaskController.tasks().url))) {
<div class="grid-row">
    <div class="column-two-thirds">
        <h1 class="heading-xlarge">
            <span class="heading-secondary">@t.oppId: @t.oppTitle</span>
            @t.name
        </h1>

        @errors.map { e =>
        <span class="error-message" role="alert">@e.err</span>
        }

    <table  border="0">
        <thead>
        <tr> <th scope="col" colspan="2"> Task Details</th> </tr>
        </thead>

        <tbody>
        <tr>
            <td>Id</td>
            <td>@t.id.id</td>
        </tr>
        <tr>
            <td>Assigned To</td>
            <td>@t.groups</td>
        </tr>
        <tr>
            <td>Opportunity</td>
            <td> @t.oppTitle </td>
        </tr>
        <tr>
            <td>Application</td>
            <td> <a href="@url/application/@t.appId"> @t.appRef</a></td>
        </tr>

        <form method="POST"
              action="@controllers.routes.TaskController.submitAssignAssessors(t.id)"
              novalidate="novalidate" >

        </tbody>
        <tr>
            <td>First Assessor</td>
            <td>
                <div class="rifs-form-buttons">

                    <select class="form-control dropdown" id="select-box" name="assignassessor1">

                        @for((key, value) <- statusmap) {
                        <option value=@key>@value</option>
                        }
                    </select>
                </div>
            </td>
        </tr>

        <tr>
            <td>Second Assessor</td>
            <td>
                <div class="rifs-form-buttons">

                    <select class="form-control dropdown" id="select-box" name="assignassessor2">

                        @for((key, value) <- statusmap) {
                        <option value=@key>@value</option>
                        }
                    </select>
                </div>
            </td>
        </tr>

        <tr>
            <td>Third Assessor</td>
            <td>
                <div class="rifs-form-buttons">

                    <select class="form-control dropdown" id="select-box" name="assignassessor3">

                        @for((key, value) <- statusmap) {
                        <option value=@key>@value</option>
                        }
                    </select>
                </div>
            </td>
        </tr>

        <tr>
            <td colspan="2">Comments
                <div class="rifs-form-buttons">

                    <details>
                        <summary role="button"><span class="summary">Help with this section</span></summary>
                        <div class="panel panel-border-narrow">Test Test Test Test Test</div>
                    </details>

                    <textarea id="name" class="form-control textarea-resize" title="name" name="comment"></textarea>
                    <input type="hidden" name="processInstanceId" value="@t.processInstanceId">
                    <input type="submit" name="save" class="button button--start" value="Submit Process">


                </div>
             </td>
         </tr>

        </form>

    </table>
    </div>

    @taskHistory(t)


</div>


}